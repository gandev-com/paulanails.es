---
import LetterGlitch from "../React/LetterGlitch.tsx";
import LogoWall from "../components/logoWall.astro";
import SkillsList from "../React/SkillsList.tsx";
---

<section class="text-[var(--white)] mt-24 md:mt-0" id="home">
  <div class="max-w-5xl mx-auto space-y-8 md:py-36 pb-14">
    <div class="text-left space-y-4">
      <div
        class="rounded-[28px] h-40 p-3 md:min-h-[400px] lg:h-full min-h-[300px] shadow-lg relative overflow-hidden"
        style="background-color: var(--background);"
      >
        <!-- Gradiente con forma de pastel (parte quitada inferior izquierda) -->
        <div
          class="absolute inset-0 rounded-[28px] z-0"
          style="background: linear-gradient(to bottom right, var(--bento-pink-light), var(--bento-pink)); clip-path: polygon(0 0, 100% 0, 100% 100%, 50% 100%, 0 50%);"
        >
        </div>

        <!-- Slider de fotos: versión móvil ocupa mitad superior + 1/3 inferior (66.66%), desktop mantiene diseño original -->
        <div
          class="absolute top-0 right-0 rounded-tr-[28px] overflow-hidden z-10"
          style="width: 100%; height: 70%;"
        >
          <div class="md:hidden absolute inset-0">
            <div
              class="slider-container relative w-full h-full bg-white/5 backdrop-blur-sm"
            >
              <img
                src="/nails/nails-1.webp"
                alt="Paula Nails 1"
                class="slider-image absolute inset-0 w-full h-full object-contain object-center transition-opacity duration-1000"
              />
              <img
                src="/nails/nails-2.jpeg"
                alt="Paula Nails 2"
                class="slider-image absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-1000 opacity-0"
              />
              <img
                src="/nails/nails-3.jpeg"
                alt="Paula Nails 3"
                class="slider-image absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-1000 opacity-0"
              />
              <img
                src="/nails/nails-4.jpeg"
                alt="Paula Nails 4"
                class="slider-image absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-1000 opacity-0"
              />
            </div>
          </div>
        </div>

        <!-- Slider de fotos: versión desktop -->
        <div
          class="absolute top-0 right-0 rounded-tr-[28px] overflow-hidden z-10 hidden md:block"
          style="left: 30%; width: 70%; height: 65%;"
        >
          <div
            class="slider-container relative w-full h-full bg-white/5 backdrop-blur-sm"
          >
            <img
              src="/nails/nails-1.webp"
              alt="Paula Nails 1"
              class="slider-image absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-1000"
            />
            <img
              src="/nails/nails-2.jpeg"
              alt="Paula Nails 2"
              class="slider-image absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-1000 opacity-0"
            />
            <img
              src="/nails/nails-3.jpeg"
              alt="Paula Nails 3"
              class="slider-image absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-1000 opacity-0"
            />
            <img
              src="/nails/nails-4.jpeg"
              alt="Paula Nails 4"
              class="slider-image absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-1000 opacity-0"
            />
          </div>
        </div>

        <div
          class="flex flex-col lg:flex-row lg:items-start space-y-4 lg:space-y-0 lg:space-x-8 md:gap-4 relative z-20 h-full"
        >
          <h1
            class="absolute top-2 right-2 md:relative md:top-0 md:right-0 text-[var(--white)] text-2xl md:text-8xl font-medium text-pretty leading-tight md:leading-none text-right md:text-left"
          >
            Paula <br />
            <span class="md:ml-12 font-edwardian">Nails</span>
          </h1>

          <div class="flex-1"></div>
        </div>

        <!-- Texto rotativo y botones (inferior derecha) -->
        <div
          class="absolute bottom-2 right-2 md:bottom-3 md:right-3 flex flex-col items-end gap-2 md:gap-3 z-20"
        >
          <p class="text-sm md:text-2xl text-[var(--white-icon)]">
            <span class="text-[var(--sec)] shiny-sec rotating-text"></span>
          </p>

          <div class="flex flex-row items-center gap-2 flex-wrap justify-end">
            <div class="flex justify-start gap-2">
              <a
                target="_blank"
                href="https://github.com/Gan-dev"
                aria-label="GitHub"
                style="color: var(--white-icon); border-color: var(--white-icon-tr); background-color: var(--bento-pink-light);"
                class="hover:text-white transition duration-300 ease-in-out border border-1 p-1.5 md:p-2 rounded-xl"
                onmouseover="this.style.backgroundColor='var(--bento-pink)'"
                onmouseout="this.style.backgroundColor='var(--bento-pink-light)'"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  class="md:w-[30px] md:h-[30px]"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-instagram-icon lucide-instagram"
                  ><rect width="20" height="20" x="2" y="2" rx="5" ry="5"
                  ></rect><path
                    d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"
                  ></path><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"
                  ></line></svg
                >
              </a>

              <a
                target="_blank"
                href="https://wa.me/1234567890"
                aria-label="WhatsApp"
                style="color: var(--white-icon); border-color: var(--white-icon-tr); background-color: var(--bento-pink-light);"
                class="hover:text-white transition duration-300 ease-in-out border border-1 p-1.5 md:p-2 rounded-xl"
                onmouseover="this.style.backgroundColor='var(--bento-pink)'"
                onmouseout="this.style.backgroundColor='var(--bento-pink-light)'"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="size-5 md:size-8"
                >
                  <path
                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"
                  ></path>
                </svg>
              </a>
            </div>

            <a
              href="#contact"
              style="color: var(--white-icon); border-color: var(--white-icon-tr); background-color: var(--bento-pink-light);"
              class="hover:text-white transition duration-300 ease-in-out border border-1 px-3 py-1.5 md:px-6 md:py-3 rounded-xl font-medium text-xs md:text-base"
              onmouseover="this.style.backgroundColor='var(--bento-pink)'"
              onmouseout="this.style.backgroundColor='var(--bento-pink-light)'"
            >
              Agendar cita
            </a>
          </div>
        </div>
      </div>

      <LogoWall />

      <div class="flex flex-col lg:flex-row items-center gap-8">
        <SkillsList client:load />
        <div
          class="flex justify-center md:w-full md:h-[292px] size-[290px] pt-3 md:pt-9 md:ml-16"
        >
          <LetterGlitch
            client:load
            glitchColors={["#5e4491", "#A476FF", "#241a38"]}
            glitchSpeed={33}
            centerVignette={false}
            outerVignette={true}
            smooth={true}
          />
        </div>
      </div>
    </div>
  </div>

  <style is:global>
    .shiny-sec {
      background: linear-gradient(
        90deg,
        #ff1744 0%,
        #ff6b9d 25%,
        #ffffff 50%,
        #ff6b9d 75%,
        #ff1744 100%
      );
      background-size: 200% 100%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: shine 2s linear infinite;
      display: inline-block;
      min-width: 130px;
    }

    @keyframes shine {
      0% {
        background-position: 0% 50%;
      }
      100% {
        background-position: 200% 50%;
      }
    }

    .rotating-text {
      display: inline-block;
      opacity: 1;
      transition: opacity 0.3s ease-in-out;
    }

    .rotating-text.fade-out {
      opacity: 0;
    }
  </style>

  <script>
    // Slider automático de imágenes
    const sliderImages =
      document.querySelectorAll<HTMLElement>(".slider-image");
    if (sliderImages.length > 0) {
      let currentSlide = 0;

      function nextSlide() {
        sliderImages[currentSlide].style.opacity = "0";
        currentSlide = (currentSlide + 1) % sliderImages.length;
        sliderImages[currentSlide].style.opacity = "1";
      }

      // Cambiar imagen cada 3 segundos
      setInterval(nextSlide, 3000);
    }

    // Texto rotativo con efecto typewriter
    const rotatingText = document.querySelector(".rotating-text");
    if (rotatingText) {
      const words = ["BELLEZA", "CUIDADO", "ARTE", "ESTILO", "TENDENCIA"];
      let currentIndex = 0;

      // Función para escribir letra por letra
      function typeWord(word: string) {
        let charIndex = 0;
        rotatingText.textContent = "";
        rotatingText.classList.remove("fade-out");

        const typingInterval = setInterval(() => {
          if (charIndex < word.length) {
            rotatingText.textContent += word[charIndex];
            charIndex++;
          } else {
            clearInterval(typingInterval);
          }
        }, 100); // 100ms por letra
      }

      // Función para borrar letra por letra
      function eraseWord() {
        const currentText = rotatingText.textContent || "";
        let charIndex = currentText.length;

        const erasingInterval = setInterval(() => {
          if (charIndex > 0) {
            rotatingText.textContent = currentText.substring(0, charIndex - 1);
            charIndex--;
          } else {
            clearInterval(erasingInterval);
            // Cambiar a la siguiente palabra
            currentIndex = (currentIndex + 1) % words.length;
            setTimeout(() => typeWord(words[currentIndex]), 200);
          }
        }, 80); // 80ms por letra al borrar
      }

      // Iniciar con la primera palabra
      typeWord(words[0]);

      // Ciclo de escritura y borrado
      setInterval(() => {
        eraseWord();
      }, 3000); // Esperar 3 segundos antes de borrar
    }
  </script>
</section>
